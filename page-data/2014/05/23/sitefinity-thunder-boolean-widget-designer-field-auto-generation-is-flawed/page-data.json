{"componentChunkName":"component---src-templates-post-js","path":"/2014/05/23/sitefinity-thunder-boolean-widget-designer-field-auto-generation-is-flawed/","result":{"data":{"markdownRemark":{"html":"<h2>Problem</h2>\n<p>When you use Sitefinity Thunder (a great help, by the way) to generate a Widget Designer for an existing widget that has a boolean property, you get this javascript in the auto-generated javascript file (let’s say my boolean field is named HasSubMenu):</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"highlight-javascript\"><code class=\"highlight-javascript\"><span class=\"token comment\">/* RefreshUI HasSubMenu */</span>\n<span class=\"token function\">jQuery</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">get_hasSubMenu</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"checked\"</span><span class=\"token punctuation\">,</span> controlData<span class=\"token punctuation\">.</span>HasSubMenu<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This code is in the refreshUI method.  It’s supposed to mark a checkbox as checked if HasSubMenu is true and not check it if it’s false.  The problem is, for some reason, HasSubMenu is a string in Javascript instead of a real boolean. So, HasSubMenu will be either “true” or “false”–both of which are true values in Javascript.  That is, because “true” and “false” are both non-empty strings, they evaluate to true when used as an expression.</p>\n<p>This means, no matter what you do with the checkbox, the next time you click “Edit” for this widget, the checkbox will be checked and your data is effectively corrupted.</p>\n<h2>Solution</h2>\n<p>The solution is pretty simple.  Instead of using controlData.HasSubMenu for the expression by itself, update your Javascript so that you check if the string is “true” or not: controlData.HasSubMenu === \"true\".  The line in the refreshUI method should now look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"highlight-javascript\"><code class=\"highlight-javascript\"><span class=\"token comment\">/* RefreshUI HasSubMenu */</span>\n<span class=\"token function\">jQuery</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">get_hasSubMenu</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"checked\"</span><span class=\"token punctuation\">,</span> controlData<span class=\"token punctuation\">.</span>HasSubMenu <span class=\"token operator\">===</span> <span class=\"token string\">\"true\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now your checkbox will keep it’s value as you would expect.</p>","fields":{"slug":"/2014/05/23/sitefinity-thunder-boolean-widget-designer-field-auto-generation-is-flawed/"},"frontmatter":{"title":"Sitefinity Thunder Boolean Widget Designer Field Auto-Generation is Flawed","formattedDate":"Fri May 23rd 2014","isoDate":"2014-05-23T00:00:00.000Z","fromNowDate":"8 years ago","categories":["programming"],"tags":["sitefinity"]}},"site":{"siteMetadata":{"title":"Ben Ramey's Blog","tagline":"Scripture, programming problems, solutions and stories."}},"sitePage":{"path":"/dev-404-page/"}},"pageContext":{"slug":"/2014/05/23/sitefinity-thunder-boolean-widget-designer-field-auto-generation-is-flawed/"}},"staticQueryHashes":[]}