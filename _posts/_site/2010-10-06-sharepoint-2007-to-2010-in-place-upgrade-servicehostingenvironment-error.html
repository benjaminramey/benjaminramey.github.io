<p>I’m testing an in-place SharePoint 2007 to SharePoint 2010 upgrade today and I came across this odd error during the update process.</p>

<p>I successfully installed SharePoint 2010 and proceeded to run the configuration wizard which updates 2007 to 2010.  The configuration process would always fail with an error in the Central Administration web.config file.  Viewing the configuration log file (the configuration wizard provided the location of it) turned up the error.</p>

<p>Apparently, at some point in the process the configuration wizard looks for the serviceHostingEnvironment element under the <code class="highlighter-rouge">&lt;system.serviceModel&gt;</code> section in the Central Administration web.config.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;serviceHostingEnvironment</span> <span class="na">aspNetCompatibilityEnabled=</span><span class="s">”true”</span> <span class="nt">/&gt;</span></code></pre></figure>

<p>If it doesn’t find it adds it itself, but curiously, it wraps it in an incomplete system.serviceModel tag so it looks like this:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;system.serviceModel&gt;</span>
<span class="nt">&lt;serviceHostingEnvironment</span> <span class="na">aspNetCompatibilityEnabled=</span><span class="s">”true”</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/system.serviceModel&gt;</span></code></pre></figure>

<p>This then caused the configuration wizard to bomb out.</p>

<p>The simple solution was to just add the <code class="highlighter-rouge">&lt;serviceHostingEnvironment aspNetCompatibilityEnabled=”true” /&gt;</code> element under my existing <code class="highlighter-rouge">&lt;system.serviceModel&gt;</code> section.  The wizard completed just fine after this.</p>
