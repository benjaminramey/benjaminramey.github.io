<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/37b3f20555b3dcfb.css" as="style"/><link rel="stylesheet" href="/_next/static/css/37b3f20555b3dcfb.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-e70c6273bfe3f237.js" defer=""></script><script src="/_next/static/chunks/main-4011ba79f13e7457.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ce8c41266b210471.js" defer=""></script><script src="/_next/static/chunks/61-425b38ade8d8eadf.js" defer=""></script><script src="/_next/static/chunks/388-1e496dfd41235e8f.js" defer=""></script><script src="/_next/static/chunks/314-535fae6e035750df.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...slug%5D-f75c9ae4d92bd42c.js" defer=""></script><script src="/_next/static/R8Sw_EiHTY-FX1feRuOue/_buildManifest.js" defer=""></script><script src="/_next/static/R8Sw_EiHTY-FX1feRuOue/_ssgManifest.js" defer=""></script><script src="/_next/static/R8Sw_EiHTY-FX1feRuOue/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div><header><div class="container"><div class="d-flex justify-content-between align-item-center"><a class="d-flex justify-content-start align-items-center mr-2" href="/"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2740%27%20height=%2740%27/%3e"/></span><img alt="Gravatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Gravatar" src="https://en.gravatar.com/userimage/738990/32d8e61848233a67f5e02dcc43be0ff8.jpeg" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span><span class="ml-2">Ben Ramey&#x27;s Blog</span></a><div class="d-none d-sm-flex flex-column justify-content-around ml-2"><small>Scripture, programming problems, solutions and stories.</small></div></div></div></header><nav class="main"><div class="container d-flex justify-content-center"><a href="/archive/">archive</a><a href="/tags/">tags</a><a href="/categories/">categories</a></div></nav><main><div class="container"><article class="post"><h1 class="post-title">TaxonomyManager WCF Error in Ektron 8.5 3-tier Setup</h1><div class="post-info d-flex justify-content-start"><time dateTime="2013-03-15T06:00:00Z" class="post-date">Fri Mar 15th, 2013<!-- -->, <!-- -->over 9 years<!-- --> ago</time><nav class="post-tags"><a href="/tags/ektron/">#<!-- -->ektron</a></nav><nav class="post-categories"><span>posted in:</span><a href="/categories/programming/">programming</a></nav></div><div><h2>Problem</h2>
<p>I’m currently working on a project to import data into an existing Ektron 8.5 SP3 installation. It is pulling existing product data from a database, transforming it into the smart form XML we need and then shoving that data into the Ektron installation. In addition to creating content items, the import tool also updates metadata and taxonomy fields.</p>
<p>The update the taxonomy fields, I use the TaxonomyManager to get the taxonomy by name, then set the taxonomy IDs on TaxonomyItemData objects. This import tool isn’t running inside of an Ektron installation–it’s a standalone tool–so it takes advantage of Ektron 8.5’s 3-tier setup. This means the TaxonomyManager calls are going over the wire via the WCF services.</p>
<p>The TaxonomyManager calls were throwing WCF errors, however, saying that the ITaxonomyManager interface was violating the WCF rules of not having any same-named methods. If you look, the ITaxonomyManager interface defines multiple same-named methods, including two versions of GetList.</p>
<p>This was pretty confusing to me because I couldn’t believe that Ektron would release a major version like 8.5, touting their 3-tier capabilities, without having tested one of the major content managers liket he TaxonomyManager.</p>
<h2>Solution</h2>
<p>Whatever the case may be, I started snooping around on the net for others having experienced this issue. As usual though (also a mystery), I couldn’t find any info on it. Why does there seem to be so little content on the net about Ektron??</p>
<p>I started snooping around with decompiling the Ektron.Cms.ObjectFactory DLL code where the ITaxonomyManager interface is defined. Everything looked good–it had the same-named methods, but was using the OperationContract attribute which lets you define the action name. The two GetList actions were defined with different names, so something wasn’t matching up with the error I was seeing in my import project. You can see that the two GetList methods have different Action values, making it OK for WCF.</p>
<div class="remark-highlight"><pre class="language-csharp"><code class="language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">OperationContract</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Action<span class="token operator">=</span><span class="token string">"GetList"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token return-type class-name">List<span class="token punctuation">&#x3C;</span>TaxonomyData<span class="token punctuation">></span></span> <span class="token function">GetList</span><span class="token punctuation">(</span><span class="token class-name">TaxonomyCriteria</span> criteria<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">OperationContract</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Action<span class="token operator">=</span><span class="token string">"GetListByCustomProperty"</span><span class="token punctuation">,</span> Name<span class="token operator">=</span><span class="token string">"GetListByCustomPropertyCriteria"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token return-type class-name">List<span class="token punctuation">&#x3C;</span>TaxonomyData<span class="token punctuation">></span></span> <span class="token function">GetList</span><span class="token punctuation">(</span><span class="token class-name">TaxonomyCustomPropertyCriteria</span> criteria<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>When I decompiled the Ektron.Cms.ObjectFactory DLL that I was using in my import project, I found the problem. You can see it here:</p>
<div class="remark-highlight"><pre class="language-csharp"><code class="language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">OperationContract</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Action<span class="token operator">=</span><span class="token string">"GetList"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token return-type class-name">List<span class="token punctuation">&#x3C;</span>TaxonomyData<span class="token punctuation">></span></span> <span class="token function">GetList</span><span class="token punctuation">(</span><span class="token class-name">TaxonomyCriteria</span> criteria<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">OperationContract</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Action<span class="token operator">=</span><span class="token string">"GetList"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token return-type class-name">List<span class="token punctuation">&#x3C;</span>TaxonomyData<span class="token punctuation">></span></span> <span class="token function">GetList</span><span class="token punctuation">(</span><span class="token class-name">TaxonomyCustomPropertyCriteria</span> criteria<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Notice how the Action is defined with the same name. I checked the DLL versions of my DLL and the DLL in the Ektron 8.5 SP3 site I was pushing content too. They were both the same: 8.5.0.356. So, somewhere along the line, Ektron fixed the issue without updating the AssemblyFileVersion to signify a bug fix/updated code. Once I copied the DLL from the SP3 site’s bin folder to my import project, it worked just fine.</p>
<p>So, if you have the same problem somewhere, look for an updated Ektron.Cms.ObjectFactory 8.5 DLL–probably in SP3.</p>
</div></article><section class="comments"><a id="comments-section"><h2>Comments</h2></a><div id="disqus_thread"></div></section></div></main><footer class="footer"><div class="container"><hr/><small>© <time dateTime="2022-08-01T00:01:47.619Z">2022</time>. All rights reserved.</small></div><script async="" defer="" data-website-id="b5832ded-a501-4aab-b4ce-ef0373a1a887" src="https://umami.benramey.com/umami.js"></script></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"tags":["ektron"],"categories":["programming"],"title":"TaxonomyManager WCF Error in Ektron 8.5 3-tier Setup","contentHtml":"\u003ch2\u003eProblem\u003c/h2\u003e\n\u003cp\u003eI’m currently working on a project to import data into an existing Ektron 8.5 SP3 installation. It is pulling existing product data from a database, transforming it into the smart form XML we need and then shoving that data into the Ektron installation. In addition to creating content items, the import tool also updates metadata and taxonomy fields.\u003c/p\u003e\n\u003cp\u003eThe update the taxonomy fields, I use the TaxonomyManager to get the taxonomy by name, then set the taxonomy IDs on TaxonomyItemData objects. This import tool isn’t running inside of an Ektron installation–it’s a standalone tool–so it takes advantage of Ektron 8.5’s 3-tier setup. This means the TaxonomyManager calls are going over the wire via the WCF services.\u003c/p\u003e\n\u003cp\u003eThe TaxonomyManager calls were throwing WCF errors, however, saying that the ITaxonomyManager interface was violating the WCF rules of not having any same-named methods. If you look, the ITaxonomyManager interface defines multiple same-named methods, including two versions of GetList.\u003c/p\u003e\n\u003cp\u003eThis was pretty confusing to me because I couldn’t believe that Ektron would release a major version like 8.5, touting their 3-tier capabilities, without having tested one of the major content managers liket he TaxonomyManager.\u003c/p\u003e\n\u003ch2\u003eSolution\u003c/h2\u003e\n\u003cp\u003eWhatever the case may be, I started snooping around on the net for others having experienced this issue. As usual though (also a mystery), I couldn’t find any info on it. Why does there seem to be so little content on the net about Ektron??\u003c/p\u003e\n\u003cp\u003eI started snooping around with decompiling the Ektron.Cms.ObjectFactory DLL code where the ITaxonomyManager interface is defined. Everything looked good–it had the same-named methods, but was using the OperationContract attribute which lets you define the action name. The two GetList actions were defined with different names, so something wasn’t matching up with the error I was seeing in my import project. You can see that the two GetList methods have different Action values, making it OK for WCF.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-csharp\"\u003e\u003ccode class=\"language-csharp\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token attribute\"\u003e\u003cspan class=\"token class-name\"\u003eOperationContract\u003c/span\u003e\u003cspan class=\"token attribute-arguments\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eAction\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"GetList\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"token return-type class-name\"\u003eList\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eTaxonomyData\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eGetList\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eTaxonomyCriteria\u003c/span\u003e criteria\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token attribute\"\u003e\u003cspan class=\"token class-name\"\u003eOperationContract\u003c/span\u003e\u003cspan class=\"token attribute-arguments\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eAction\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"GetListByCustomProperty\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e Name\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"GetListByCustomPropertyCriteria\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"token return-type class-name\"\u003eList\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eTaxonomyData\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eGetList\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eTaxonomyCustomPropertyCriteria\u003c/span\u003e criteria\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eWhen I decompiled the Ektron.Cms.ObjectFactory DLL that I was using in my import project, I found the problem. You can see it here:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-csharp\"\u003e\u003ccode class=\"language-csharp\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token attribute\"\u003e\u003cspan class=\"token class-name\"\u003eOperationContract\u003c/span\u003e\u003cspan class=\"token attribute-arguments\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eAction\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"GetList\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"token return-type class-name\"\u003eList\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eTaxonomyData\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eGetList\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eTaxonomyCriteria\u003c/span\u003e criteria\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token attribute\"\u003e\u003cspan class=\"token class-name\"\u003eOperationContract\u003c/span\u003e\u003cspan class=\"token attribute-arguments\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eAction\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"GetList\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"token return-type class-name\"\u003eList\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eTaxonomyData\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eGetList\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eTaxonomyCustomPropertyCriteria\u003c/span\u003e criteria\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eNotice how the Action is defined with the same name. I checked the DLL versions of my DLL and the DLL in the Ektron 8.5 SP3 site I was pushing content too. They were both the same: 8.5.0.356. So, somewhere along the line, Ektron fixed the issue without updating the AssemblyFileVersion to signify a bug fix/updated code. Once I copied the DLL from the SP3 site’s bin folder to my import project, it worked just fine.\u003c/p\u003e\n\u003cp\u003eSo, if you have the same problem somewhere, look for an updated Ektron.Cms.ObjectFactory 8.5 DLL–probably in SP3.\u003c/p\u003e\n","date":"2013-03-15T06:00:00Z","slug":"/2013/03/15/taxonomymanager-wcf-error-in-ektron-8-5-3-tier-setup"},"__N_SSG":true},"page":"/[...slug]","query":{"slug":["2013","03","15","taxonomymanager-wcf-error-in-ektron-8-5-3-tier-setup"]},"buildId":"R8Sw_EiHTY-FX1feRuOue","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>